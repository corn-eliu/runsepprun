        -:    0:Source:/usr/include/qt4/QtTest/qtestsystem.h
        -:    0:Graph:debug/main.gcno
        -:    0:Data:-
        -:    0:Runs:0
        -:    0:Programs:0
        -:    1:/****************************************************************************
        -:    2:**
        -:    3:** Copyright (C) 2010 Nokia Corporation and/or its subsidiary(-ies).
        -:    4:** All rights reserved.
        -:    5:** Contact: Nokia Corporation (qt-info@nokia.com)
        -:    6:**
        -:    7:** This file is part of the QtTest module of the Qt Toolkit.
        -:    8:**
        -:    9:** $QT_BEGIN_LICENSE:LGPL$
        -:   10:** Commercial Usage
        -:   11:** Licensees holding valid Qt Commercial licenses may use this file in
        -:   12:** accordance with the Qt Commercial License Agreement provided with the
        -:   13:** Software or, alternatively, in accordance with the terms contained in
        -:   14:** a written agreement between you and Nokia.
        -:   15:**
        -:   16:** GNU Lesser General Public License Usage
        -:   17:** Alternatively, this file may be used under the terms of the GNU Lesser
        -:   18:** General Public License version 2.1 as published by the Free Software
        -:   19:** Foundation and appearing in the file LICENSE.LGPL included in the
        -:   20:** packaging of this file.  Please review the following information to
        -:   21:** ensure the GNU Lesser General Public License version 2.1 requirements
        -:   22:** will be met: http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html.
        -:   23:**
        -:   24:** In addition, as a special exception, Nokia gives you certain additional
        -:   25:** rights.  These rights are described in the Nokia Qt LGPL Exception
        -:   26:** version 1.1, included in the file LGPL_EXCEPTION.txt in this package.
        -:   27:**
        -:   28:** GNU General Public License Usage
        -:   29:** Alternatively, this file may be used under the terms of the GNU
        -:   30:** General Public License version 3.0 as published by the Free Software
        -:   31:** Foundation and appearing in the file LICENSE.GPL included in the
        -:   32:** packaging of this file.  Please review the following information to
        -:   33:** ensure the GNU General Public License version 3.0 requirements will be
        -:   34:** met: http://www.gnu.org/copyleft/gpl.html.
        -:   35:**
        -:   36:** If you have questions regarding the use of this file, please contact
        -:   37:** Nokia at qt-info@nokia.com.
        -:   38:** $QT_END_LICENSE$
        -:   39:**
        -:   40:****************************************************************************/
        -:   41:
        -:   42:#ifndef QTESTSYSTEM_H
        -:   43:#define QTESTSYSTEM_H
        -:   44:
        -:   45:#include <QtTest/qtestcase.h>
        -:   46:#include <QtCore/qcoreapplication.h>
        -:   47:#include <QtCore/qdatetime.h>
        -:   48:
        -:   49:QT_BEGIN_HEADER
        -:   50:
        -:   51:QT_BEGIN_NAMESPACE
        -:   52:
        -:   53:QT_MODULE(Test)
        -:   54:
        -:   55:class QWidget;
        -:   56:#ifdef Q_WS_X11
        -:   57:extern void qt_x11_wait_for_window_manager(QWidget *w);
        -:   58:#endif
        -:   59:
        -:   60:namespace QTest
        -:   61:{
    #####:   62:    inline static void qWait(int ms)
        -:   63:    {
    #####:   64:        Q_ASSERT(QCoreApplication::instance());
        -:   65:
    #####:   66:        QTime timer;
    #####:   67:        timer.start();
    #####:   68:        do {
    #####:   69:            QCoreApplication::processEvents(QEventLoop::AllEvents, ms);
    #####:   70:            QTest::qSleep(10);
        -:   71:        } while (timer.elapsed() < ms);
    #####:   72:    }
        -:   73:
        -:   74:    inline static bool qWaitForWindowShown(QWidget *window)
        -:   75:    {
        -:   76:#if defined(Q_WS_X11)
        -:   77:        qt_x11_wait_for_window_manager(window);
        -:   78:        QCoreApplication::processEvents();
        -:   79:#elif defined(Q_WS_QWS)
        -:   80:        Q_UNUSED(window);
        -:   81:        qWait(100);
        -:   82:#else
        -:   83:        Q_UNUSED(window);
        -:   84:        qWait(50);
        -:   85:#endif
        -:   86:        return true;
        -:   87:    }
        -:   88:
        -:   89:}
        -:   90:
        -:   91:QT_END_NAMESPACE
        -:   92:
        -:   93:QT_END_HEADER
        -:   94:
        -:   95:#endif
